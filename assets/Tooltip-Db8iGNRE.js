import{j as w}from"./jsx-runtime-BlAj40OV.js";import{c as E}from"./index-Bl6ORisp.js";import{r as i}from"./index-Cs7sjTYM.js";import{r as R}from"./index-BU4L-DQy.js";const D="_tooltipContent_15m5t_1",X="_tooltipContainer_15m5t_11",q="_tooltipArrow_15m5t_19",U="_bottomTooltipArrow_15m5t_50",$="_topTooltipArrow_15m5t_54",J="_spyElement_15m5t_58",K="_triggerContainer_15m5t_64",W="_nonFocusableOutline_15m5t_74",A={tooltipContent:D,tooltipContainer:X,tooltipArrow:q,bottomTooltipArrow:U,topTooltipArrow:$,spyElement:J,triggerContainer:K,nonFocusableOutline:W},L={TOP:"top",BOTTOM:"bottom"},Y={a:"link",area:"link",article:"article",aside:"complementary",button:"button",details:"group",dfn:"term",dialog:"dialog",fieldset:"group",figure:"figure",footer:"contentinfo",form:"form",h1:"heading",h2:"heading",h3:"heading",h4:"heading",h5:"heading",h6:"heading",header:"banner",hr:"separator",iframe:"document",img:"img",input:null,li:"listitem",main:"main",menu:"list",menuitem:"menuitem",meter:"meter",nav:"navigation",ol:"list",option:"option",progress:"progressbar",section:"region",select:"listbox",summary:"button",table:"table",tbody:"rowgroup",td:"cell",textarea:"textbox",tfoot:"rowgroup",th:"columnheader",thead:"rowgroup",tr:"row",ul:"list"},z={button:"button",checkbox:"checkbox",radio:"radio",range:"slider",text:"textbox",password:"textbox",email:"textbox",search:"searchbox",number:"spinbutton",tel:"textbox",url:"textbox",submit:"button",reset:"button",image:"button",file:"textbox"},H=["INPUT","SELECT","TEXTAREA","A","BUTTON","AREA"];function G(t){return!t||!t.trim()?new Set:new Set(t.trim().split(/\s+/))}function Q(t,o){return[...G(t).add(o)].join(" ")}function V(t){const o=t.getAttribute("role");if(o)return o;const l=t.tagName.toLowerCase();if(l==="input"){const d=t.getAttribute("type");return d?z[d]:"textbox"}const n=Y[l];return n||"button"}function M(t){if(!t||!(t instanceof HTMLElement))return null;if(H.includes(t.tagName))return t;for(const o of t.children){const l=M(o);if(l)return l}return null}function Z(t,o){return JSON.stringify(t)===JSON.stringify(o)}function j(t){return o=>o===t||o&&Z(o,t)?o:t}const N={enter:"Enter",space:" ",tab:"Tab",escape:"Escape"};function P({x:t,position:o}){return w.jsx("div",{className:E(A.tooltipArrow,{[A.bottomTooltipArrow]:o===L.BOTTOM,[A.topTooltipArrow]:o===L.TOP}),style:{transform:`translateX(${t}px) ${o===L.BOTTOM?" rotate(180deg)":""}`}})}function v(){const t=document.getElementById("bp-portal-target");if(t)return t;const o=document.createElement("div");return o.id="bp-portal-target",o.style.position="absolute",o.setAttribute("role","tooltip"),document.body.appendChild(o),o}function g({triggerRect:t,id:o,onTooltipLeave:l,children:n,triggerEvents:d}){const s=i.useRef(null),[r,m]=i.useState(null),[b,p]=i.useState(null),f=i.useCallback(()=>{var _;const h=((_=s==null?void 0:s.current)==null?void 0:_.getBoundingClientRect())??null;m(j(h&&{width:h.width,height:h.height}))},[]),c=i.useCallback(()=>{const h=document.body.getBoundingClientRect();p(h.width)},[]);i.useLayoutEffect(()=>{f(),c()},[f,c]);const T=i.useCallback(()=>{window.requestAnimationFrame(()=>{f(),c()})},[f,c]),y=i.useCallback(h=>{d!=null&&d.includes("hover")&&l(h)},[l,d]);i.useEffect(()=>(window.addEventListener("resize",T),()=>{window.removeEventListener("resize",T)}),[T]);const{x:k,y:C,arrowTooltipOffsetX:O,position:x}=i.useMemo(()=>et(t,r,b),[t,r,b]);return R.createPortal(w.jsxs("div",{id:o,className:A.tooltipContainer,ref:s,onPointerLeave:y,style:{transform:`translate3d(${k}px, ${C}px, 0)`},children:[x===L.BOTTOM&&w.jsx(P,{position:x,x:O}),w.jsx("div",{className:A.tooltipContent,children:n}),x===L.TOP&&w.jsx(P,{position:x,x:O})]}),v())}function tt({children:t,content:o,id:l,triggerEvents:n}){const d=i.useId(),s=l||d,r=i.useRef(null),[m,b]=i.useState(null);i.useEffect(()=>{var S;const e=(S=r.current)==null?void 0:S.nextSibling;if(!e)return;const a=M(e),u=a??e,F=u.getAttribute("aria-roledescription")??V(u)??"button";u.setAttribute("role","button"),a||(u==null||u.setAttribute("tabindex","0"),u==null||u.classList.add(A.nonFocusableOutline)),u.setAttribute("aria-roledescription",F);const B=u.getAttribute("aria-describedby");(B==null?void 0:B.includes(s))||u.setAttribute("aria-describedby",Q(B,s))},[t,s]);const p=i.useCallback(()=>{var u;const e=(u=r==null?void 0:r.current)==null?void 0:u.nextSibling;let a=(e==null?void 0:e.getBoundingClientRect())??null;a!=null&&a.height||(a=null),b(j(a&&{left:a.left,top:a.top,bottom:a.bottom,width:a.width}))},[r]),f=i.useCallback(()=>{m&&p()},[p,m]),c=i.useCallback(()=>{b(null)},[]),T=i.useCallback(()=>{m?c():p()},[p,c,m]),y=i.useCallback(e=>{const a=document.getElementById(d);if(e.relatedTarget instanceof Node&&(a!=null&&a.contains(e.relatedTarget)))return e.preventDefault();c()},[c,d]),k=i.useCallback(e=>{var a,u;if(e.relatedTarget instanceof Node&&((u=(a=r==null?void 0:r.current)==null?void 0:a.nextSibling)!=null&&u.contains(e.relatedTarget)))return e.preventDefault();c()},[c]),C=i.useCallback(e=>{n!=null&&n.includes("click")&&(e.preventDefault(),T())},[T,n]),O=i.useCallback(e=>{if(n!=null&&n.includes("keypress")&&(e.key===N.enter||e.key===N.space)){e.preventDefault(),T();return}e.key===N.escape&&c()},[c,T,n]),x=i.useCallback(()=>{n!=null&&n.includes("focus")&&p()},[p,n]),h=i.useCallback(()=>{n!=null&&n.includes("focus")&&c()},[c,n]),_=i.useCallback(()=>{n!=null&&n.includes("hover")&&p()},[p,n]),I=i.useCallback(e=>{n!=null&&n.includes("hover")&&y(e)},[y,n]);return i.useEffect(()=>{var a;const e=(a=r.current)==null?void 0:a.nextSibling;return e==null||e.addEventListener("click",C),e.addEventListener("pointerenter",_),e.addEventListener("pointerleave",I),e.addEventListener("focus",x),e.addEventListener("focusin",x),e.addEventListener("focusout",h),e.addEventListener("keydown",O),()=>{e.removeEventListener("click",C),e.removeEventListener("pointerenter",_),e.removeEventListener("pointerleave",I),e.removeEventListener("focus",x),e.removeEventListener("focusin",x),e.removeEventListener("focusout",h),e.removeEventListener("keydown",O)}},[C,x,O,_,I,T,r,h,t]),i.useEffect(()=>(window.addEventListener("resize",f),()=>{window.removeEventListener("resize",f)}),[f]),i.useLayoutEffect(()=>{f()},[t,f]),w.jsxs(w.Fragment,{children:[w.jsx("div",{ref:r,className:A.spyElement}),t,m&&w.jsx(g,{triggerRect:m,id:s,onTooltipLeave:k,triggerEvents:n,children:o})]})}function lt({children:t,content:o,id:l,triggerEvents:n=["hover","focus"],inactive:d}){const[s,r]=i.useState(!1);return i.useEffect(()=>(r(!0),()=>{r(!1)}),[]),!s||d?t:w.jsx(tt,{content:o,id:l,triggerEvents:n,children:t})}function et(t,o,l,n=20,d=17){let s=0,r=0,m=0,b=0,p=L.TOP;if(!t||!o||!l)return{x:s,y:r,arrowTooltipOffsetX:b,position:p};const f=o.width>l?0:Math.min(n,(l-o.width)/2),c=o.width/2,T=t.width/2;s=t.left-c+T;const y=s;m=s+o.width,s<f?s=f:m>l-f&&(s-=m-(l-f)),b=y-s+c-d;const k=b+2*d-o.width;if(k>0){const C=Math.min(k,f);s+=C,b-=C}return r=t.top-o.height,r<0&&(p=L.BOTTOM,r=t.bottom),{x:s,y:r,arrowTooltipOffsetX:b,position:p}}export{lt as T};
