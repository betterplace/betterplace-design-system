import{j as i}from"./jsx-runtime-BlAj40OV.js";import{r as a}from"./index-Cs7sjTYM.js";import{c as A}from"./index-Bl6ORisp.js";import{O as _}from"./index-B_ZOYESs.js";import{c as j}from"./core-Drm9bBME.js";const y="_picker_1c0oj_1",S="_swatch_1c0oj_7",x="_activeSwatch_1c0oj_19",C="_inactiveSwatch_1c0oj_25",E="_swatchInner_1c0oj_30",N="_activePickerSwatch_1c0oj_37",I="_popover_1c0oj_46",P="_pickerSwatches_1c0oj_68",R="_input_1c0oj_81",B="_label_1c0oj_104",u={picker:y,swatch:S,activeSwatch:x,inactiveSwatch:C,swatchInner:E,activePickerSwatch:N,popover:I,pickerSwatches:P,input:R,label:B},D=e=>e.substring(1,3)==="00"&&e.length===9?"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAABlBMVEX////Z5exdL3Q7AAAAGklEQVQY02NgAAFGRkaa0gzo4gzo6hgGiTsANBAAYf1ZdsIAAAAASUVORK5CYII=')":e;function l(e){const t=j[e];return typeof t!="object"&&typeof t!="number"?t:"#"}const L=["mousedown","touchstart"],O=(e,t,r=L)=>{const n=a.useCallback(o=>{e.current&&o.target instanceof Element&&!e.current.contains(o.target)&&t()},[t,e]);a.useEffect(()=>{for(const o of r)document.addEventListener(o,n);return()=>{for(const o of r)document.removeEventListener(o,n)}})},Q=e=>{const t=a.useCallback(r=>{r.key==="Escape"&&e()},[e]);a.useEffect(()=>(document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}),[t])},G=()=>{const[e,t]=a.useState(!1),r=a.useCallback(c=>{c&&c.preventDefault(),t(!0)},[t]),n=a.useCallback(c=>{c&&c.preventDefault(),t(!1)},[t]),o=a.useCallback(c=>{c&&c.preventDefault(),t(!e)},[t,e]);Q(n);const p=a.useMemo(()=>e?i.jsx("div",{"aria-hidden":"true",className:"modal",style:{display:"block",background:"black",opacity:.1},onClick:()=>t(!1)}):null,[t,e]);return{active:e,background:p,hide:n,show:r,toggle:o}},v=a.forwardRef(function({onClick:t,color:r,triggerSwatch:n=!1,className:o,"aria-describedby":p,...c},f){return i.jsxs("button",{...c,className:A(u.swatch,o,{[u.activeSwatch]:n}),onClick:t,ref:f,"aria-roledescription":n?"colour well":"button","aria-describedby":p,children:[i.jsx("div",{style:{background:D(r)},className:u.swatchInner}),i.jsx("span",{className:"sr-only",children:r})]})});function T({color:e,presetColors:t,onChange:r,hexInputLabel:n,label:o,id:p,...c}){const f=a.useId(),h=p||f,m=a.useRef(null),b=a.useRef(null),d=G(),w=a.useCallback(s=>{s.key==="Enter"&&(s.preventDefault(),d.hide())},[d]),k=a.useCallback(()=>{var s;(s=b.current)==null||s.focus(),d.hide()},[d]);return O(m,k),i.jsxs("div",{className:u.picker,children:[i.jsx("div",{className:u.label,id:`label-${h}`,children:o}),i.jsx(v,{...c,"aria-describedby":`label-${h}`,id:h,color:e,onClick:s=>{s.preventDefault(),d.toggle()},ref:b,triggerSwatch:!0}),d.active&&i.jsx("div",{className:u.popover,ref:m,children:i.jsxs("div",{className:u.pickerSwatches,children:[t.map(s=>a.createElement(v,{...c,key:s,color:s,onClick:g=>{g.preventDefault(),k(),r(s)},className:A({[u.activeSwatch]:s===e,[u.inactiveSwatch]:s!==e})})),i.jsx("label",{htmlFor:"hexColorInput",className:"sr-only",children:n}),i.jsx(_,{id:"hexColorInput",color:e,onChange:r,alpha:!0,prefixed:!0,className:u.input,onKeyDown:w})]})})]})}function $({onColorChange:e,transparentOption:t=!1,value:r,hexInputLabel:n,label:o,...p}){const c=[l("betterplace-color-green-500"),l("betterplace-color-green-700"),l("betterplace-color-green-900"),l("betterplace-color-yellow-400"),l("betterplace-me-color-orange-500"),l("betterplace-color-red-700"),l("betterplace-color-red-900"),l("betterplace-color-purple-400"),l("betterplace-color-purple-700"),l("betterplace-color-gray-500"),l("betterplace-color-gray-700"),l("betterplace-color-gray-900")].filter(Boolean);return t&&c.push("#00000000"),i.jsx(T,{...p,color:`#${r==="transparent"?"00000000":r}`,presetColors:c,onChange:e,hexInputLabel:n,label:o})}export{$ as C};
