import{j as t}from"./jsx-runtime-BlAj40OV.js";import{B as v}from"./Button-nc_sTf4_.js";import{c as u}from"./index-Bl6ORisp.js";import{H as Y,C as q}from"./Heading-CPc3BsJp.js";import{I as G}from"./IconButton-COfy-Ayz.js";import{r as o}from"./index-Cs7sjTYM.js";import{L as X}from"./LayoutStack-D48tTvLz.js";import"./_commonjsHelpers-BosuxZz1.js";import"./preventDefault-CIaEEaQs.js";import"./Icon-gEYVkC9x.js";const $="_modal_1esn1_1",V="_modalInner_1esn1_50",z="_modalHeader_1esn1_54",Q="_closeButton_1esn1_69",Z="_closeIcon_1esn1_75",ee="_modalContent_1esn1_79",te="_modalActions_1esn1_83",c={modal:$,modalInner:V,modalHeader:z,closeButton:Q,closeIcon:Z,modalContent:ee,modalActions:te};function oe(a){a&&(!("close"in a)||typeof a.close!="function"||a.close())}function D({id:a,isOpen:s,onClose:r,onOpen:m,onCloseComplete:f,onOpenComplete:h,title:L,customActions:A,children:H,manualFocusRef:_,closeText:E,closeOnClickOutside:F=!0,hideHeader:K=!1,hideActions:P=!1,classNames:d={}}){const l=o.useRef(null),T=o.useRef(null),[W,k]=o.useState(!0),I=o.useCallback(()=>_||(T.current?T:l),[_]),J=o.useId(),j=a||J,p=o.useCallback(e=>{var R;if(e.key!=="Tab")return;const n=(R=l.current)==null?void 0:R.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),i=n==null?void 0:n[0],y=n==null?void 0:n[n.length-1];if(e.shiftKey&&document.activeElement===i){e.preventDefault(),y==null||y.focus();return}!e.shiftKey&&document.activeElement===y&&(e.preventDefault(),i==null||i.focus())},[]),x=o.useCallback(()=>{f==null||f(),k(!0)},[f]),g=o.useCallback(()=>{var e;h==null||h(),k(!0),(e=l.current)==null||e.removeAttribute("inert")},[h]);o.useEffect(()=>{var n;k(!1);const e=l.current;if(e){if(s){e.showModal();const i=I();(n=i==null?void 0:i.current)==null||n.focus(),e.removeEventListener("transitionend",x),e.addEventListener("keydown",p),e.addEventListener("transitionend",g),m==null||m()}else e.removeEventListener("keydown",p),e.removeEventListener("transitionend",g),e.addEventListener("transitionend",x),oe(e),e.setAttribute("inert","");return()=>{e==null||e.removeEventListener("keydown",p),e.removeEventListener("transitionend",x),e.removeEventListener("transitionend",g)}}},[I,p,s,x,m,g]);const U=o.useCallback(e=>{const{current:n}=l;e.target===n&&r()},[r]);return t.jsx("dialog",{id:j,ref:l,className:u(c.modal,d.modal),onCancel:r,onClick:F?U:void 0,"aria-labelledby":`modal-title-${j}`,"aria-modal":"true",title:L,tabIndex:-1,children:t.jsxs(X,{space:"400",className:u(c.modalInner,d.modalInner),children:[!K&&t.jsxs("div",{className:u(c.modalHeader,d.titleContainer),children:[t.jsx(Y,{level:"h200",as:"h2",id:`modal-title-${j}`,children:L}),t.jsx(G,{kind:"plain",className:c.closeButton,onClick:r,ref:T,type:"button",iconName:"x",iconProps:{title:E,color:"fg-content-primary"}})]}),t.jsx("div",{className:u(c.modalContent,d.contentContainer),children:(s||!W)&&H}),!P&&t.jsx("div",{className:u(c.modalActions,d.actionsContainer),children:A||t.jsx(q,{onClick:r,type:"button",children:E})})]})})}const ne={id:"3712:19327",url:"https://www.figma.com/file/PJ7OUutWRrSHW6qgaPNW1l/DS-betterplace-GENERAL?node-id=3712-19327",themes:[]};var se={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,STORYBOOK:"true",STORYBOOK_BASE_URL:"/betterplace-design-system/"};function ae(){const[a,s]=o.useState(!1);return t.jsxs(t.Fragment,{children:[t.jsx(v,{onClick:()=>s(!0),children:"Open modal"}),t.jsx(D,{onClose:()=>s(!1),isOpen:a,title:"This is the title of the modal",closeText:"Close",children:"There can be any content in the modal. The modal has a close button by default."})]})}function re(){const[a,s]=o.useState(!1),r=o.useRef(null);return t.jsxs(t.Fragment,{children:[t.jsx(v,{onClick:()=>s(!0),children:"Open modal"}),t.jsx(D,{onClose:()=>s(!1),isOpen:a,title:"This is the title of the modal",closeText:"Cancel",manualFocusRef:r,customActions:t.jsxs(t.Fragment,{children:[t.jsx(v,{onClick:()=>s(!1),kind:"secondary",children:"Cancel"}),t.jsx(v,{onClick:()=>s(!1),ref:r,children:"Primary action"})]}),children:"There can be any content in the modal. The modal has a close button by default."})]})}const ge={title:"Components/Layout components/LayoutModal",component:ae,argTypes:{isOpen:{control:!1,description:"Modal state"},onClose:{control:!1,description:"Closing action"},title:{control:{type:"text"},description:"Title of the modal"},closeText:{control:{type:"text"},description:"Text content of the default close button and alternative text for the closing x"},customActions:{control:!1,description:"JSX element containing custom actions (buttons and/or links) that will be displayed in the modal"},manualFocusRef:{control:!1,description:"Reference to the HTML element inside of the modal that should receive focus. Per default the closing x is focussed."},children:{control:!1,description:"Content to be rendered in the modal"},props:{control:!1,description:"All props (e.g. style and className) are passed on to the root JSX element"}},parameters:{design:{type:"figspec",accessToken:se.STORYBOOK_FIGMA_ACCESS_TOKEN,url:ne.url},vitest:{testFile:"LayoutModal.test.tsx"}}},C={name:"Modal with default action (close)",args:{title:"Title of the modal"}},b={name:"Modal with custom actions",render:()=>t.jsx(re,{}),args:{args:{title:"Title of the modal"}}};var M,S,B;C.parameters={...C.parameters,docs:{...(M=C.parameters)==null?void 0:M.docs,source:{originalSource:`{
  name: 'Modal with default action (close)',
  args: {
    title: 'Title of the modal'
  }
}`,...(B=(S=C.parameters)==null?void 0:S.docs)==null?void 0:B.source}}};var N,w,O;b.parameters={...b.parameters,docs:{...(N=b.parameters)==null?void 0:N.docs,source:{originalSource:`{
  name: 'Modal with custom actions',
  render: () => <ModalWithCustomActions />,
  args: {
    args: {
      title: 'Title of the modal'
    }
  }
}`,...(O=(w=b.parameters)==null?void 0:w.docs)==null?void 0:O.source}}};const ye=["Default","WithCustomActions"];export{C as Default,b as WithCustomActions,ye as __namedExportsOrder,ge as default};
