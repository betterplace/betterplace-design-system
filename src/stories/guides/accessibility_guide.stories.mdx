import { Meta } from '@storybook/addon-docs'

<Meta title="Guides/Accessibility guide" />

# Accessibility (a11y) guide

- [Accessibility knowledge](#knowledge)
- [Accessibility workflow](#workflow)

<br />

## <a name="knowledge"></a>Accessibility knowledge

### What is web accessibility?

- „Web accessibility means that websites, tools, and technologies are designed and developed so that **people with disabilities** can use them.” [[1]](https://www.w3.org/WAI/fundamentals/accessibility-intro/#what)
- Web accessibility involves a wide range of disabilities including **auditory**, **cognitive**, **neurological**, **physical**, **speech** and **visual**.
- Web accessibility is one aspect of **inclusive design**. Inclusive design describes methodologies to build products that can be accessed and used by as many people as possible. It may address disabilities, age, economic situation, geographic location, language, race, and more.
- Inclusive design – and thus also accessibility – is one aspect of **usability**. Usability is defined by the “extend to which a product can be used by specified users to achieve specified goals effectively, efficiently and with satisfaction in a specified context.” It depends on the specified users which role accessibility and inclusivity play.

### How do people with disabilties use the web?

- People with disabilities might use high-tech assistive technologies to extend their capabilities, e.g.
  - keyboards (instead of pointing devices),
  - screen readers,
  - braille displays,
  - voice recognition software,
  - switch controls and
  - screen magnifiers.
- People with disabilities might adjust operating system and browser settings, e.g.
  - dark mode,
  - high-contrast mode and
  - font size.

**Further information:**

- [List of videos](https://tetralogical.com/blog/2021/12/24/browsing-with-assistive-technology-videos/) that provide good insight into browsing with existive technologies

#### Web Content Accessibility Guidelines (WCAG)

- The [Web Content Accessibility Guidelines (WCAG)](https://www.w3.org/WAI/standards-guidelines/wcag/) are an internationally agreed upon standard established to help developing accessible web content.
- The latest stable version is WCAG 2.1. WCAG 2.2 is a working draft published in August 2020. WCAG 3 (Silver) is under development.
- The guidelines are organized by four main principles (POUR):
  - **Perceivable** – Information and user interface components must be presentable to users in ways they can perceive.
  - **Operable** – User interface components and navigation must be operable.
  - **Understandable** – Information and the operation of user interface must be understandable.
  - **Robust** – Content must be robust enough that it can be interpreted reliably by a wide variety of user agents, including assistive technologies.
- Each guideline consists of one or more **success criteria**.
- To be compliant to a conformance level, you must meet all the success criteria of that level, plus all levels below it.
  - **A (Basic)** – If this isn't met, assistive technology may not be able to read, understand, or fully operate the page or view.
  - **AA (Ideal)** – Required for multiple government and public body websites.
  - **AAA (Specialized support)** – This is typically reserved for parts of websites and web apps that serve a specialized audience.
- Achieving Level AAA is usually not possible, but aiming to satisfy at least some of the criteria in this level is an attainable goal.
- WCAG doesn't tackle _all_ possible accessibility barriers. So even if we technically satisfy all of them, we might still have usability and accessibility issues.

> Accessibility is about making things work for people. It's not passing an assessment or ticking a box to say you meet a standard. It's about people and their needs just like any other part of user centred design. Do legal compliance as the absolute minimum, but always go further! — Craig Abbott, Head of Accessibility at DWP Digital

**Further information:**

<a href="https://intopia.digital/wp-content/uploads/2019/10/2019-WCAG2.1-Map-Intopia-plus-reading-order.pdf">
  <img src="a11y_map_intopia.png" alt="Intopia WCAG2.1 map" width="50%" />
</a>

#### Specifications and guidelines (from a German perspective)

- In Germany IT accessibility is regulated by several specifications and guidelines.
- The EU norm **EN 301 549** with the title ”Accessibility requirements for ICT products and services” refers to **WCAG 2.1.** — it introduces some additional criteria though.
- The EU directive **(EU) 2016/2102** obliges all **public bodies** in the EU to be accessible according to EN 301 54. The **Barrierefreie Informationstechnik-Verordnung** (BITV) implements this regulation in Germany.
- The **European Accessibility Act** (EAA) and the therefrom derived Barrierefreiheitsstärkungsgesetz also obliges the private sector to offer accessible products. Specific products (e.g. ATMs, websites of passenger transport services) placed on the market after 28 June 2025 have to be accessible.

<br />

- **Further information:**
- [Overview of specifications and guidelines in Germany (German only)](https://www.cio.bund.de/Webs/CIO/DE/digitaler-wandel/it-barrierefreiheit/vorgaben-und-richtlinien/vorgaben-und-richtlinien-node.html)
- [Overview of EN 301 549 (German only)](https://www.barrierefreiheit-dienstekonsolidierung.bund.de/Webs/PB/DE/gesetze-und-richtlinien/en301549/en301549-node.html)

### Best practices

General remark: Use these best practices thoughtfully. Always keep in mind that accessibility is not only about following rules, but about the best way to serve the needs of users.

<details>
<summary>For UX designers</summary>

<br />

#### Color

- All information-bearing elements must at least have a contrast of 4.5:1 (to background)
- Exceptions are UI controls (e.g. check in checkbox) color fills, text bigger than 18px (bold). They only need 3:1.
- Disabled and decorative elements don't need to reach a contrast ratio: but even better is they do!
- Design color independently. That means, an interface needs to be understood in gray scale as well.

#### Interaction

Elements that can be interacted with should be clearly identifiable by unique signifiers that are only used for that type of interaction.

Rules of thumb:

- Text within a box is a button.
- Underlined, blue, underlined and blue text is a link.

Stick to one style for interactive elements throughout the platform to reduce interaction cost.

The **touch target size** (area of and around an element that triggers an action) needs to be at least **44 x 44px** (Google says 48 x 48px).
Make sure to have designed for all the states you need: **Default, hover, focus, pressed, disabled, loading/processing**, checked (toggled), visited.

Everything that can be swiped or dragged, needs also being able to be clicked/tabbed.

#### Content

- Each link that links to a unique url should have a unique and out of context understandable link text.
- All CTAs should include the main keyword and action verb within the first 1-3 words of the text/label (that's all our brain focuses on and reads before making a decision).
- Every link is a promise: make it precise and transparent where it'll lead.

**Tip:** To avoid “show/read more links” link the headline of the content.

- Show hints and error messages right after the label (otherwise the user won't know what to look out for before filling in the input).
  Never show important text below a CTA for the same reason.
- Make sure sighted and people with visual deficiency as well as cognitive disabilities (or tired and stressed people) can also skip through a page by using concise and comprehensive link/heading/button copy.
- Make sure all information-bearing icons, graphics and illustrations have an ALT text.

</details>

<details>

<summary>For developers</summary>

<br />

#### Markup

Use native HTML elements wherever it makes semantically sense. Most HTML elements convey a semantic meaning and provide additional functionality, that users can benefit from or even depend on.

##### Examples

- use a `button`, when an interaction triggers some action on the page, e.g. opening a modal, submitting a form, loading data, swiping a slider, etc.
- use an `a` tag with an `href` attribute for links, i.e. when the interaction navigates the user to a different page (or a different part of the page).
- use a `ul` or `ol`, whenever you want to group some items together in a list and want the user to know how many items the list contains. This does not only apply to "regular" text items, but can be anything, e.g. a gallery of images, a list of teasers, navigation items, etc.
- use headline tags (`h1`, `h2`, etc.) for headlines and use them in a logical order.

Complete [list of HTML elements](https://developer.mozilla.org/en-US/docs/Web/HTML/Element).

#### Images

##### Alternative text

Make sure _every_ image has an `alt` attribute, either with

- a descriptive text (think of how you would describe the image to someone on the phone) or
- an empty string. This only applies to images that are purely decorative and don't contribute anything to the content.

If it's an image uploaded by the user, decide whether

- we can define a general rule, e.g. "avatar of _name of the user_". (Keep in mind that this is usually less valuable of an information. You should also be careful not to create redundancy.) Or
- we should give the user the possibility to enter their own alternative text.

More information about [writing good alt text](https://webaim.org/techniques/alttext/).

##### Responsive Images

Make sure images are served only as big as necessary.

#### Interactive components

- Make sure every form element has an associated `label`.
- Make sure every interactive element can be reached by using only the keyboard and the tab order is logical.
- Use an appropriate native element if possible (see [Markup](#Markup)).
- Use ARIA roles, properties and states if there is no such component provided by HTML out of the box.
- Use [React Aria](https://react-spectrum.adobe.com/react-aria/) for helper methods and the [ARIA authoring practices guide](https://www.w3.org/WAI/ARIA/apg/patterns/) as a reference for common component patterns.

#### Zooming and font size

- Don't use pixels values unless you explicitly want the value to stay consistent no matter the font size (which might be the case for borders and shadows for example).
- Use `rem` for most of the things and `em` when it makes sense (font sizes, line-height).

#### Content structure and order

- Make sure every page has a title. There should only be one `h1` per page.
- Make sure heading levels are in a logical order.
- Use [landmarks](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles/landmark_role), such as `nav`, `main`, `section`, etc. It helps users navigate the page quicker.
- Don't move around items arbitrarily with CSS (be careful with `order`, `float` or `grid` for example). It can result in a [confusing experience for keyboard users](https://www.matuzo.at/blog/the-dark-side-of-the-grid-part-2/).

#### Hiding content

Depending on the use case there are several [ways to hide content](https://kittygiraudel.com/2021/02/17/hiding-content-responsibly/). Think about whether the content should be

- visible
- machine readable (announced by a screen reader)

and based on that decide which approach is most appropriate.

##### Examples

- Visible but not machine readable (example: decorative icons)
- Invisible but machine readable (example: context for icon-only buttons)
- Invisible and not machine readable (example: offscreen content such as a closed modal window)
- Visible and machine readable (example: most stuff)

</details>

### Helpful resources

#### For everyone

- [Curated list of online resources related to web accessibility](https://a11y.me/)
- [Accessibility Developer Guide](https://www.accessibility-developer-guide.com/) by _«Access for all»_ (some parts are not only helpful for developers)
- [Quick accessibility tests anyone can do](https://tetralogical.com/blog/2022/01/18/quick-accessibility-tests-anyone-can-do/)

#### Mainly for developers

- [Introduction to some main accessibility topics](https://web.dev/accessible/) by _Google's web.dev_
- _Mozilla's_ [guide to accessibility](https://developer.mozilla.org/en-US/docs/Web/Accessibility)
- _Google's_ [guide to accessibility](https://developers.google.com/web/fundamentals/accessibility)
- [An extensive list of accessible components including links to further information](https://www.smashingmagazine.com/2021/03/complete-guide-accessible-front-end-components/) by _Smashing Magazine_
- [Interactive video course](https://www.udacity.com/course/web-accessibility--ud891) by _Udacity_
- [Playlist of short _YouTube_ tutorials](https://www.youtube.com/playlist?list=PLNYkxOF6rcICWx0C9LVWWVqvHlYJyqw7g)

<br />

## <a name="workflow"></a>Accessibility workflow

Accessibility (a11y) is incorporated into different steps of our workflow.

<img src="a11y_workflow.png" alt="Workflow sketch" width="50%" />

### 1. Discovery

- 🚧 Use a11y metrics (score?, number of critical issues?)

_In a later expansion stage_

- Interview people with disabilities to get a better understanding of their problems and needs.

### 2. Design

- Use [checklist](https://not-checklist.intopia.digital/) (filtered by job roles _Visual Design_, _Content Design_ and _UX Design_) to make sure the design is accessible. UX Designers could as well start with the reduced checklist from the [annotation example](https://www.figma.com/file/PJ7OUutWRrSHW6qgaPNW1l/DS-betterplace-GENERAL?node-id=2264%3A3762) and only after that use the mentioned full checklist to double-check.
- Make annotations to pass on structural and/or interactual a11y considerations to engineers (see [annotation example](https://www.figma.com/file/PJ7OUutWRrSHW6qgaPNW1l/DS-betterplace-GENERAL?node-id=2264%3A3762) with reusable annotation elements).

_In a later expansion stage_

- Use design system to reuse accessible styles and components.

### 3. Refinement

- Use [checklist](https://not-checklist.intopia.digital/) to make sure the planned implementation considers a11y.
- 🚧 Define a11yAC's

### 4. Implementation

#### 4.1 Development & Automated testing

- Use [linter](https://www.npmjs.com/package/eslint-plugin-jsx-a11y) and [logging to the browser's console](https://www.npmjs.com/package/@axe-core/react) to catch and fix a11y issues early.
- Read a11yAC's (and eventually have a look at the [checklist](https://not-checklist.intopia.digital/) again) to know what to code and how to test.
- Follow coding standards to avoid minor recurring a11y problems.

_In a later expansion stage_

- Use design system to reuse accessible styles and components.
- Add automated tests considering keyboard and screen reader usage

#### 4.2 Manual testing

- Read a11yAC's to know what to test and how.
- Follow [manual testing guidelines](?path=/story/guides-testing-guide--page)

### 5. Measurement

- 🚧 Use a11y metrics (score?, number of critical issues?)

_In a later expansion stage_

- Perform UX Tests or other UX research methods with people with disabilities.

### Training

- Provide [a11y knowledge](#knowledge)
- 🚧 Share (basic) a11y knowledge in initial meetings / workshops

_In a later expansion stage_

- Regularly share a11y knowledge / discuss a11y topics in different meetings (Tech Talk, Sprint Review, …)

### Documentation

- Keep documentation up to date

_In a later expansion stage_

- Build accessible design system.
- Derive a11yAC templates from a11yAC's.
